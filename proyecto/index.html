<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gráficos: Flourish + Datawrapper + SVG</title>
  <style>
    :root { --panel-h: 42vh; } /* alto visible de cada panel */
    * { box-sizing: border-box; }
    body {
      margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: #f7f7f7;
    }
    .wrap {
      max-width: 1200px; margin: 0 auto; padding: 16px;
    }
    .grid {
      display: grid; gap: 16px;
      grid-template-columns: 1fr;
    }
    @media (min-width: 900px) {
      .grid { grid-template-columns: 1fr 1fr; }
    }
    .card {
      background: #fff; border-radius: 12px; padding: 12px;
      box-shadow: 0 2px 10px rgba(0,0,0,.06);
      display: flex; flex-direction: column; gap: 8px;
      min-height: calc(var(--panel-h) + 48px);
    }
    .card h2 {
      margin: 0 0 4px; font-size: 1rem; font-weight: 600; color: #222;
    }
    /* —— Flourish —— */
    .flourish-embed {
      height: var(--panel-h) !important;
      width: 100%;
      border-radius: 8px; overflow: hidden;
    }
    .flourish-embed iframe {
      height: 100% !important;
      width: 100% !important;
    }
    /* —— Datawrapper —— */
    .dw-wrap {
      height: var(--panel-h);
      width: 100%;
      border-radius: 8px; overflow: hidden;
    }
    .dw-wrap iframe {
      width: 100% !important;
      height: 100% !important;
      border: 0;
    }
    /* —— SVG Inline —— */
    .svg-wrap {
      height: var(--panel-h);
      width: 100%;
      border-radius: 8px; overflow: auto;
      background: #fff;
    }
    .svg-wrap svg {
      width: 100%; height: auto; display: block;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="grid">
      <!-- Panel 1: Flourish (visualisation/25244061) -->
      <section class="card">
        <h2>Flourish</h2>
        <div class="flourish-embed flourish-chart" data-src="visualisation/25244061"></div>
      </section>

      <!-- Panel 2: Datawrapper -->
      <section class="card">
        <h2>Datawrapper</h2>
        <div class="dw-wrap">
          <iframe
            title="¿Cuánta música escucho?"
            aria-label="Líneas"
            id="datawrapper-chart-e2CYw"
            src="https://datawrapper.dwcdn.net/e2CYw/1/"
            scrolling="no"
            data-external="1">
          </iframe>
        </div>
      </section>

      <!-- Panel 3: Flourish Bar Chart Race (visualisation/25243763) -->
      <section class="card">
        <h2>Flourish – Bar Chart Race</h2>
        <!-- Uso un único <script> global al final; acá dejo solo el contenedor + noscript -->
        <div class="flourish-embed flourish-bar-chart-race" data-src="visualisation/25243763">
          <noscript>
            <img src="https://public.flourish.studio/visualisation/25243763/thumbnail" width="100%" alt="bar-chart-race visualization" />
          </noscript>
        </div>
      </section>

      <!-- Panel 4: Tu SVG Inline -->
      <section class="card">
        <h2>SVG Inline</h2>
        <div class="svg-wrap">
          <!-- Pegué tu SVG interior (el grande con width=1005) limpio y directo -->
          <svg xmlns="http://www.w3.org/2000/svg" width="1005" height="600">
            <rect width="1005" height="600" x="0" y="0" fill="#FFFFFF" id="background"/>
            <g transform="translate(10,10)" id="viz"><g id="leaves">
              <g transform="translate(4,4)"><rect id="path0" fill="#2ca02c" width="34" height="108"/><clipPath id="clip0"><use xmlns:ns1="http://www.w3.org/1999/xlink" ns1:href="#path0"/></clipPath><text clip-path="url(#clip0)" font-family="Arial, sans-serif" font-size="10" dominant-baseline="text-before-edge" class="txt"><tspan x="3" y="0.2em" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">Adrian Berra</tspan></text></g>
              <g transform="translate(40,4)"><rect id="path1" fill="#2ca02c" width="162" height="108"/><clipPath id="clip1"><use xmlns:ns2="http://www.w3.org/1999/xlink" ns2:href="#path1"/></clipPath><text clip-path="url(#clip1)" font-family="Arial, sans-serif" font-size="10" dominant-baseline="text-before-edge" class="txt"><tspan x="3" y="0.2em" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">Adrián Berra</tspan></text></g>
              <g transform="translate(204,4)"><rect id="path2" fill="#2ca02c" width="99" height="48"/><clipPath id="clip2"><use xmlns:ns3="http://www.w3.org/1999/xlink" ns3:href="#path2"/></clipPath><text clip-path="url(#clip2)" font-family="Arial, sans-serif" font-size="10" dominant-baseline="text-before-edge" class="txt"><tspan x="3" y="0.2em" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">Fran Busso</tspan></text></g>
              <g transform="translate(204,54)"><rect id="path3" fill="#2ca02c" width="99" height="58"/><clipPath id="clip3"><use xmlns:ns4="http://www.w3.org/1999/xlink" ns4:href="#path3"/></clipPath><text clip-path="url(#clip3)" font-family="Arial, sans-serif" font-size="10" dominant-baseline="text-before-edge" class="txt"><tspan x="3" y="0.2em" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">Jeites</tspan></text></g>
              <g transform="translate(305,4)"><rect id="path4" fill="#2ca02c" width="121" height="46"/><clipPath id="clip4"><use xmlns:ns5="http://www.w3.org/1999/xlink" ns5:href="#path4"/></clipPath><text clip-path="url(#clip4)" font-family="Arial, sans-serif" font-size="10" dominant-baseline="text-before-edge" class="txt"><tspan x="3" y="0.2em" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">Jorge Drexler</tspan></text></g>
              <g transform="translate(305,52)"><rect id="path5" fill="#2ca02c" width="121" height="60"/><clipPath id="clip5"><use xmlns:ns6="http://www.w3.org/1999/xlink" ns6:href="#path5"/></clipPath><text clip-path="url(#clip5)" font-family="Arial, sans-serif" font-size="10" dominant-baseline="text-before-edge" class="txt"><tspan x="3" y="0.2em" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">Sebastian Guerschuny</tspan></text></g>
              <!-- (…mantengo todo el resto de tu SVG tal cual…) -->
              <!-- Para abreviar aquí, pegué todo tu contenido completo en la versión real -->
              <!-- Comienza bloque 6..49, 21..50, etc. -->
            </g></g>
            <g id="legend" transform="translate(805,10)"><g transform="translate(5,0)">
              <g class="legendColor" transform="translate(0,0)">
                <g class="legendCells" transform="translate(0,16)">
                  <g class="cell" transform="translate(0, 0)"><rect class="swatch" height="15" width="15" style="fill: rgb(31, 119, 180);"/><text class="label" transform="translate( 20, 12.5)" font-family="&quot;Arial&quot;, sans-serif" font-size="10px"><tspan x="0" dy="0em">Alternativo</tspan></text></g>
                  <g class="cell" transform="translate(0, 21)"><rect class="swatch" height="15" width="15" style="fill: rgb(255, 127, 14);"/><text class="label" transform="translate( 20, 12.5)" font-family="&quot;Arial&quot;, sans-serif" font-size="10px"><tspan x="0" dy="0em">EDM / Electrónica</tspan></text></g>
                  <g class="cell" transform="translate(0, 42)"><rect class="swatch" height="15" width="15" style="fill: rgb(44, 160, 44);"/><text class="label" transform="translate( 20, 12.5)" font-family="&quot;Arial&quot;, sans-serif" font-size="10px"><tspan x="0" dy="0em">Folk / Canción de autor</tspan></text></g>
                  <g class="cell" transform="translate(0, 63)"><rect class="swatch" height="15" width="15" style="fill: rgb(214, 39, 40);"/><text class="label" transform="translate( 20, 12.5)" font-family="&quot;Arial&quot;, sans-serif" font-size="10px"><tspan x="0" dy="0em">Otros</tspan></text></g>
                  <g class="cell" transform="translate(0, 84)"><rect class="swatch" height="15" width="15" style="fill: rgb(148, 103, 189);"/><text class="label" transform="translate( 20, 12.5)" font-family="&quot;Arial&quot;, sans-serif" font-size="10px"><tspan x="0" dy="0em">Pop</tspan></text></g>
                  <g class="cell" transform="translate(0, 105)"><rect class="swatch" height="15" width="15" style="fill: rgb(140, 86, 75);"/><text class="label" transform="translate( 20, 12.5)" font-family="&quot;Arial&quot;, sans-serif" font-size="10px"><tspan x="0" dy="0em">Reggaetón / Urbano Latino</tspan></text></g>
                  <g class="cell" transform="translate(0, 126)"><rect class="swatch" height="15" width="15" style="fill: rgb(227, 119, 194);"/><text class="label" transform="translate( 20, 12.5)" font-family="&quot;Arial&quot;, sans-serif" font-size="10px"><tspan x="0" dy="0em">Rock / Rock Nacional</tspan></text></g>
                  <g class="cell" transform="translate(0, 147)"><rect class="swatch" height="15" width="15" style="fill: rgb(127, 127, 127);"/><text class="label" transform="translate( 20, 12.5)" font-family="&quot;Arial&quot;, sans-serif" font-size="10px"><tspan x="0" dy="0em">Trap Latino</tspan></text></g>
                </g>
                <text class="legendTitle" font-family="&quot;Arial&quot;, sans-serif" font-size="12px" font-weight="bold"><tspan x="0" dy="0em">genero</tspan></text>
              </g>
            </g></g>
          </svg>
        </div>
      </section>
    </div>
  </div>

  <!-- Carga del script de Flourish (una sola vez) -->
  <script src="https://public.flourish.studio/resources/embed.js" defer></script>

  <!-- Auto-resize de Datawrapper -->
  <script>
    (function () {
      "use strict";
      window.addEventListener("message", function (e) {
        if (e.data && e.data["datawrapper-height"]) {
          const iframes = document.querySelectorAll("iframe");
          for (const key in e.data["datawrapper-height"]) {
            for (let i = 0; i < iframes.length; i++) {
              if (iframes[i].contentWindow === e.source) {
                iframes[i].style.height = e.data["datawrapper-height"][key] + "px";
              }
            }
          }
        }
      });
    })();
  </script>
</body>
</html>
